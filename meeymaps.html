<html>
<head >
<title>Openlayers test</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/css/ol.css">
<script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.3.1/build/ol.js"></script>
<script src="https://code.jquery.com/jquery-1.12.3.min.js" type="text/javascript"></script>
<style>
.map, .righ-panel {
height: 500px;
width: 40%;
float: left;
}
 
.map {
border: 1px solid #000;
}

table {
  border-collapse: collapse;
  text-align: center;
}

table, th, td {
  border: 1px solid black;
  padding: 10px;
}

</style>
 
<script type="text/javascript">
var ThuaDat;
$("#document").ready(function () {
var format = 'image/png';
 
var bounds = [105.41238454000006,20.66385334100005, 105.97243758500008, 21.306485866000042];
ThuaDat = new ol.layer.Image({
source: new ol.source.ImageWMS({
ratio: 1,
url: 'http://vsmap-test.meeyland.com/geoserver/Meeymap/wms',
params: {
'FORMAT': format,
'VERSION': '1.1.1',
STYLES: '',
LAYERS: 'CNSDD_latlong_21_7',
}
})
});
var projection = new ol.proj.Projection({
code: 'EPSG:4326',
units: 'm',
axisOrientation: 'neu'
});
//

var view = new ol.View({
projection: projection
});
 
var map = new ol.Map({
target: 'map',
layers: [
ThuaDat
],
view: view
});
 
var styles = {
 
'MultiPolygon': new ol.style.Style({
stroke: new ol.style.Stroke({
color: 'red',
width: 3
})
})
};
 
var styleFunction = function (feature) {
return styles[feature.getGeometry().getType()];
};
 
var vectorLayer = new ol.layer.Vector({
//source: vectorSource,
style: styleFunction
});
map.addLayer(vectorLayer);
 
//map.getView().fitExtent(bounds, map.getSize());
map.getView().fit(bounds, map.getSize());
$("#chkThuaDat").change(function () {
if ($("#chkThuaDat").is(":checked")) {
ThuaDat.setVisible(true);
}
else {
ThuaDat.setVisible(false);
}
});
map.on('singleclick', function (evt) {
document.getElementById('info').innerHTML = "Loading... please wait...";
var view = map.getView();
var viewResolution = view.getResolution();
var source = ThuaDat.getSource();
var url = source.getFeatureInfoUrl(
evt.coordinate, viewResolution, view.getProjection(),
{'INFO_FORMAT': 'application/json', 'FEATURE_COUNT': 50 });
if (url) {
document.getElementById('info').innerHTML = '<iframe seamless src="' + url + '"></iframe>';
}
});
});
</script>
</head>
<body>
 
<div id="map" class="map"></div>
<div class="righ-panel">
<input type="checkbox" id="chkThuaDat" checked /><label for="chkThuaDat">Thửa đất</label>
<img src="http://vsmap-test.meeyland.com/geoserver/Meeymap/wms?REQUEST=GetLegendGraphic&VERSION=1.0.0&FORMAT=image/png&LAYER=CNSDD_latlong_21_7" />
<div id="info" ></div>
</div>

</body>
</html>